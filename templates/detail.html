<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ country.country }} - Wiki</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div style="max-width: 900px; margin: auto; padding: 20px;">
        <a href="/" class="back-btn">
            <span class="arrow">‚Üê</span> ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        </a>
        
        <div style="background: var(--card-bg); padding: 40px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center;">
            {% if country.flag_url %}
                <img src="{{ country.flag_url }}" alt="flag" 
                     style="max-width: 320px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); border: 5px solid #f9faff;">
            {% endif %}

            <h1 style="margin-top: 30px; margin-bottom: 5px;">{{ country.country }}</h1>

            {% if country.capital %}
            <div style="margin-top: 10px; margin-bottom: 25px;">
                <span style="background: linear-gradient(135deg, #ffeaa7, #fab1a0); padding: 8px 25px; border-radius: 50px; font-weight: 600; color: #d63031; display: inline-flex; align-items: center; box-shadow: 0 4px 15px rgba(250, 177, 160, 0.4); border: 2px solid #fff;">
                üèõÔ∏è ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏´‡∏•‡∏ß‡∏á: {{ country.capital }}
                </span>
            </div>
            {% endif %}

            <h3 style="text-align: left; color: var(--primary); margin-top: 30px; margin-bottom: 20px; display: flex; align-items: center;">
                <span style="margin-right: 10px;">üèôÔ∏è</span> ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
            </h3>

            <div style="display: flex; flex-wrap: wrap; gap: 12px; justify-content: flex-start; margin-bottom: 40px;">
                {% for city in country.cities %}
                    <span style="{% if city == country.capital %} background: linear-gradient(135deg, var(--secondary), var(--primary)); color: white; border: 2px solid #fff; box-shadow: 0 4px 10px rgba(108, 92, 231, 0.2); {% else %} background: #f1f2f6; color: var(--text-main); {% endif %} padding: 10px 18px; border-radius: 12px; font-size: 0.9rem; font-weight: 500;">
                        {{ city }} {% if city == country.capital %} ‚≠ê {% endif %}
                    </span>
                {% endfor %}
            </div>

            <hr style="border: 0; border-top: 2px solid #f1f2f6; margin-bottom: 40px;">

            <h3 style="text-align: left; color: var(--primary); margin-bottom: 15px; display: flex; align-items: center;">
                <span style="margin-right: 10px;">üìç</span> ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
            </h3>
            
            <div style="display: flex; justify-content: flex-start; gap: 15px; margin-bottom: 20px; font-size: 0.9rem;">
                <span style="background: #fff; border: 1px solid #eee; padding: 8px 15px; border-radius: 10px;"><strong>Latitude:</strong> {{ country.lat }}</span>
                <span style="background: #fff; border: 1px solid #eee; padding: 8px 15px; border-radius: 10px;"><strong>Longitude:</strong> {{ country.long }}</span>
            </div>

            <div style="border-radius: 20px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 4px solid #fff;">
                <iframe width="100%" height="350" frameborder="0" style="border:0; display: block;" 
                        src="https://maps.google.com/maps?q={{ country.lat }},{{ country.long }}&t=&z=5&ie=UTF8&iwloc=&output=embed">
                </iframe>
            </div>

            <div class="rating-container" style="margin-top: 40px;">
                <p style="color: var(--text-soft); font-size: 0.9rem; margin-bottom: 5px;">‡∏Ñ‡∏∏‡∏ì‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ô‡∏µ‡πâ‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?</p>
                <div class="stars" id="star-rating">
                    <span class="star" data-value="1">‚òÖ</span>
                    <span class="star" data-value="2">‚òÖ</span>
                    <span class="star" data-value="3">‚òÖ</span>
                    <span class="star" data-value="4">‚òÖ</span>
                    <span class="star" data-value="5">‚òÖ</span>
                </div>
                <p id="rating-status" style="font-size: 0.8rem; color: var(--secondary); margin-top: 5px; height: 1em;"></p>
            </div>
        </div>
    </div>
    
    <script>
        // Script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Rating ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°
        const countryName = "{{ country.country }}";
        const stars = document.querySelectorAll('.star');
        const status = document.getElementById('rating-status');
        const savedRating = localStorage.getItem(`rating_${countryName}`);
        if (savedRating) { updateStars(savedRating); status.innerText = "You rated this country!"; }
        stars.forEach(star => {
            star.addEventListener('click', () => {
                const value = star.getAttribute('data-value');
                localStorage.setItem(`rating_${countryName}`, value);
                updateStars(value);
                status.innerText = "Rating saved!";
                setTimeout(() => { status.innerText = ""; }, 2000);
            });
            star.addEventListener('mouseover', () => highlightStars(star.getAttribute('data-value')));
            star.addEventListener('mouseout', () => highlightStars(localStorage.getItem(`rating_${countryName}`) || 0));
        });
        function highlightStars(value) { stars.forEach(s => { s.style.color = s.getAttribute('data-value') <= value ? '#f1c40f' : '#ddd'; }); }
        function updateStars(value) { highlightStars(value); }
    </script>
</body>
</html>